From ceba942bff1e07ca2123311e039c8e5f6b97c151 Mon Sep 17 00:00:00 2001
From: Mark Stapp <mjs@cisco.com>
Date: Thu, 21 Nov 2024 16:17:06 -0500
Subject: [PATCH] zebra: remove thread-unsafe debug from netlink nhg encoder

Remove use of vrf name, which isn't thread-safe.

Signed-off-by: Mark Stapp <mjs@cisco.com>
---
 zebra/rt_netlink.c | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

diff --git a/zebra/rt_netlink.c b/zebra/rt_netlink.c
index 5c7aee53e..cb50a3574 100644
--- a/zebra/rt_netlink.c
+++ b/zebra/rt_netlink.c
@@ -3235,9 +3235,8 @@ ssize_t netlink_nexthop_msg_encode(uint16_t cmd,
 nexthop_done:
 
 			if (IS_ZEBRA_DEBUG_KERNEL)
-				zlog_debug("%s: ID (%u): %pNHv(%d) vrf %s(%u) %s ",
+				zlog_debug("%s: ID (%u): %pNHv(%d) vrf %u %s ",
 					   __func__, id, nh, nh->ifindex,
-					   vrf_id_to_name(nh->vrf_id),
 					   nh->vrf_id, label_buf);
 		}
 
-- 
2.39.5

